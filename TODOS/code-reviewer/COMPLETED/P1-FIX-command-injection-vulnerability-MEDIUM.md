# Command Injection Vulnerability Fix

## Priority: P1 (Critical)
## Type: FIX
## Complexity: MEDIUM

## Problem
The inject-text.sh script is vulnerable to command injection attacks. Malicious snippet content can execute arbitrary shell commands.

## Vulnerable Code
```bash
# inject-text.sh line 6-13
text="$1"
wtype -s 5 "$text"
```

## Attack Vector
```json
{
  "title": "Malicious snippet",
  "content": "; rm -rf ~ #"
}
```

## Solution
Replace the vulnerable script with safe input handling:

```bash
#!/bin/bash
text="$1"

# Validate input length to prevent massive payloads
if [[ ${#text} -gt 10000 ]]; then
    echo "Error: Text too long" >&2
    exit 1
fi

# Allow QuickShell to exit completely
sleep 0.25

# Use printf with %s for safe handling of special characters
printf '%s' "$text" | wtype -s 5 -
```

## Impact
- **Before**: Complete system compromise possible
- **After**: Safe text injection only

## Files to Change
- `/inject-text.sh`

## Testing
1. Create malicious snippet with `; ls -la #`
2. Verify it only types the literal text instead of executing
3. Test with special characters: `$()`, backticks, semicolons